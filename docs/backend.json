{
  "entities": {
    "FirebaseProject": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FirebaseProject",
      "type": "object",
      "description": "Represents a Firebase project managed within the application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Firebase project." },
        "name": { "type": "string", "description": "Name of the Firebase project." },
        "projectId": { "type": "string", "description": "The Firebase project ID (as defined in the Firebase console)." },
        "apiKey": { "type": "string", "description": "API key for the Firebase project." },
        "authDomain": { "type": "string", "description": "The authentication domain for the Firebase project." },
        "databaseURL": { "type": "string", "description": "The URL for the Firebase Realtime Database (if used)." },
        "storageBucket": { "type": "string", "description": "The storage bucket name for Firebase Storage." },
        "messagingSenderId": { "type": "string", "description": "The messaging sender ID for Firebase Cloud Messaging (FCM)." },
        "appId": { "type": "string", "description": "The application ID for the Firebase project." },
        "measurementId": { "type": "string", "description": "The measurement ID for Google Analytics (if enabled)." },
        "userId": { "type": "string", "description": "Reference to the User who created the project. (Relationship: User 1:N FirebaseProject)" }
      },
      "required": ["id", "name", "projectId", "apiKey", "userId"]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Yalla Masry Academy application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user." },
        "email": { "type": "string", "description": "Email address of the user.", "format": "email" },
        "name": { "type": "string", "description": "Display name of the user." },
        "alias": { "type": "string", "description": "A fun, Pharaonic alias for gamification." },
        "role": { "type": "string", "description": "User role in the platform.", "enum": ["student", "teacher", "parent", "admin"] },
        "registrationDate": { "type": "string", "format": "date-time" },
        "nilePoints": { "type": "number" },
        "goal": { "type": "string" },
        "level": { "type": "string" },
        "badges": { "type": "array", "items": { "type": "string" } },
        "teacherId": { "type": "string", "description": "Reference to the teacher profile if the user is a teacher." }
      },
      "required": ["id", "email", "name", "role", "registrationDate"]
    },
    "Teacher": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Teacher",
      "type": "object",
      "description": "Represents a teacher on the Yalla Masry Academy platform.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the teacher, matches user ID." },
        "name": { "type": "string" },
        "profilePictureUrl": { "type": "string", "format": "uri" },
        "introVideoUrl": { "type": "string", "format": "uri" },
        "headline": { "type": "string", "description": "A short, catchy headline for the teacher's profile." },
        "bio": { "type": "string", "description": "A detailed biography of the teacher." },
        "experience": { "type": "string", "description": "Description of teaching experience." },
        "hourlyRate": { "type": "number", "description": "Price per hour in a standard currency." },
        "availability": { "type": "string", "description": "A summary of the teacher's availability (e.g., 'Weekends', 'Evenings')." },
        "rating": { "type": "number", "description": "Average rating from 1 to 5." },
        "totalReviews": { "type": "number" },
        "specialties": { "type": "array", "items": { "type": "string", "enum": ["colloquial", "quran", "kids"] } }
      },
      "required": ["id", "name", "profilePictureUrl", "headline", "bio", "hourlyRate", "rating", "specialties"]
    },
    "AdventureChallenge": {
      "title": "Adventure Challenge",
      "description": "A challenge for Nouf's Journey, translating between Gulf and Egyptian dialects.",
      "type": "object",
      "properties": {
        "category": { "type": "string", "description": "The situational category of the challenge (e.g., At the Market)." },
        "gulf_phrase": { "type": "string", "description": "The phrase a Gulf speaker would use." },
        "egyptian_phrase": { "type": "string", "description": "The equivalent phrase in the Egyptian dialect." },
        "explanation": { "type": "string", "description": "An explanation of the cultural or linguistic nuance." }
      },
      "required": ["category", "gulf_phrase", "egyptian_phrase"]
    },
    "Book": {
      "title": "Book",
      "description": "A book in the digital Islamic library.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "author": { "type": "string" },
        "category": { "type": "string", "description": "e.g., Tafsir, Hadith, History" },
        "cover": { "type": "string", "format": "uri", "description": "URL for the book cover image." }
      },
      "required": ["title", "author", "category", "cover"]
    },
    "Hadith": {
      "title": "Hadith",
      "description": "A Prophetic Tradition (Hadith) in the Sunnah collection.",
      "type": "object",
      "properties": {
        "topic": { "type": "string", "description": "The main topic of the hadith (e.g., Faith, Prayer)." },
        "source": { "type": "string", "description": "The source of the hadith (e.g., Sahih Bukhari)." },
        "text": { "type": "string", "description": "The full text of the hadith." }
      },
      "required": ["topic", "source", "text"]
    },
    "Phrase": {
      "title": "Phrase",
      "description": "A phrase or sentence for the phrasebook used in lessons.",
      "type": "object",
      "properties": {
        "category": { "type": "string", "description": "The category of the phrase (e.g., Greetings, Shopping)." },
        "text": { "type": "string", "description": "The phrase in Egyptian Arabic." },
        "translation": { "type": "string", "description": "The English translation of the phrase." }
      },
      "required": ["category", "text", "translation"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/entities/User" },
          "description": "Collection for storing user profiles. Secured by user ID."
        }
      },
      {
        "path": "/teachers/{teacherId}",
        "definition": {
          "entityName": "Teacher",
          "schema": { "$ref": "#/entities/Teacher" },
          "description": "Collection for storing public teacher profiles."
        }
      },
      {
        "path": "/adventure_challenges/{challengeId}",
        "definition": {
          "entityName": "AdventureChallenge",
          "schema": { "$ref": "#/entities/AdventureChallenge" },
          "description": "Content for Nouf's Journey challenges."
        }
      },
      {
        "path": "/books/{bookId}",
        "definition": {
          "entityName": "Book",
          "schema": { "$ref": "#/entities/Book" },
          "description": "Content for the digital library."
        }
      },
      {
        "path": "/hadiths/{hadithId}",
        "definition": {
          "entityName": "Hadith",
          "schema": { "$ref": "#/entities/Hadith" },
          "description": "Content for the Sunnah section."
        }
      },
      {
        "path": "/phrases/{phraseId}",
        "definition": {
          "entityName": "Phrase",
          "schema": { "$ref": "#/entities/Phrase" },
          "description": "Content for the phrasebook."
        }
      }
    ]
  }
}
